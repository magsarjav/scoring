# RP Scoring
Энэхүү скоринг нь дараах хоёр үндсэн алхмаас бүрдэх ба хэрэглэгчийн эрх нь тэдгээрээс гарах дүнгүүдээс дараах томьёогоор бодогдоно.

```
Хэрэглэгчийн эрх: Т = (A - B) * C + E
```
Энд хэрэв `A - B < 0` бол шууд `Т = 0` болно. Мөн хэрэв `C = 0.0` бол мөн шууд `T = 0`. Эдгээр тохиолдолд `0` болсон шалтгааныг хэрэглэгчид харуулах зорилгоор `RESPONSE_MESSAGE` массиваас харгалзах мессежийг хэвлэж харуулж байгаа (`calcMain` функц), та хэд системдээ тааруулаад өөрчилнө биз.

## Алхам 1: Хэрэглэгчийн сарын цэвэр орлого тооцох
Энэ алхамд ЗМС болон ДАН-с ирсэн өгөгдлийг ашиглана. Ингэхдээ гар дээр авч буй сарын дундаж цалинг ДАН-с ирэх НДШ-ийн өгөгдлөөс олно. Дараа нь сар бүр зээлэнд төлж буй дундаж төлбөрийг ЗМС-ийн өгөгдлөөс тооцож олно. Ингэхдээ төлж дуусаагүй зээл тус бүрийн үлдэгдэл дээр сарын 2% хүү тооцож нэмээд үлдсэн сард нь хуваана. Эцэст нь ЗМС-ийн өгөгдөл дэх зээлийн муу түүхэнд нь харгалзах коэффициентыг жилээс нь хамааруулж бодно.

### A: Сарын цалингийн орлого тооцох `calcNetIncome()` функц
Энэ алхамд хэрэглэгчийн сүүлийн `LAST_MONTH_SALARY` сарын НДШ-ийн мэдээллийг ДАН-с татаж авч ашиглана. ДАН-с мэдээлэл авахдаа он тавьж өгдөг тул сүүлийн зарим сар өмнөх оных байх тохиолдолд хоёр он дамнасан мэдээлэл авахаар хүсэлтээ илгээгээрэй.

Функцийн ажиллагаа энгийн, сүүлийн `LAST_MONTH_SALARY` сар тус бүрийн гар дээр ирэх цэвэр цалингийн (нийт цалингаас шимтгэлийг нь хасаад) нийлбэрийг сарын тоонд (`LAST_MONTH_SALARY`) хувааж, гарсан дүнгээс амьжиргааны зардал хасаж (`LIVING_COST`-р үржих замаар) гарах дүнг буцаана.

### B: Сарын зээлийн дундаж төлбөр тооцох `calcLoanAmount()` функц
Энэ алхамд хэрэглэгчийн идэвхтэй одоо төлж буй зээлүүдийн мэдээллийг ЗМС-аас татаж авч ашиглана. ЗМС-аас бүх цаг үед авч байсан дууссан, хаасан г.м бүх төрлийн зээлийн мэдээлэл ирдэг тул тэдгээрээс идэвхтэй байгаа зээлээ ялгаж авна. Идэвхтэй зээл тус бүрийн дүнг хугацаат сарын тоонд нь хувааж, сарын дундаж хүү 2% болох `INTEREST_RATE`-р үржүүлснээр тухайн зээлэнд сард хэдийг төлөхийг ойролцоогоор олж байгаа. Эдгээрийн нийлбэр нь сард зээлэнд төлөх дундаж төлбөр болно.

Энд нэмэлтээр бонус бодох Алхам 2-д ашиглах нэг утга болох TОП 4 банкны аль нэгээс зээл авч байсан эсэхийг давхар шалгаж явж байгаа.

### C: Зээлийн түүхэнд харгалзах коэффициент тооцох `calcKIndex()` функц
Хэрэглэгчийн ЗМС-аас авсан зээлийн мэдээлэл дээрээс муу түүхтэй эсэхийг шалгаж үржих коэффициент тогтооно (`LOAN_K` массив дэх үржих коэффициент). Жишээлбэл хэрэглэгч ямар нэг хэвийн бус, үлдэгдэлтэй зээлтэй бол `LOAN_K=0` буюу сарын эрх шууд `0` болно. Харин уг зээл хэвийн биш ч үлдэгдэл нь 0 байх юм бол хэдэн жилийн өмнөхөөс хамаарч `LOAN_K` массив дэх харгалзах  утга бодогдоно.

## Алхам 2: Хэрэглэгчид бонус дүн тооцох
Хэрэглэгчийн зарим мэдээлэл дээр үндэслэн манай зүгээс өгөх нэмэлт мөнгөн дүнг энд тооцно. Ингэхдээ эхлээд тухайн хэрэглэгчид  харгалзах бонус оноог олох ба дараа нь уг оноонд харгалзах мөнгөн дүнг олно.

### D: Бонус оноо тооцох `calcBonusPoint()` функц
Хэрэв хүйс нь эмэгтэй бол `+1`, нас 23-с их бол `+1`, үнэтэй утасны дугаар барьдаг бол дугаараас хамаарч `+1` юм уу `+2`, ТОП 4 банкнаас зээл авч байсан түүхтэй бол `+2` (`B` алхамд олдоно), мөн манайхаар байр түрээслээд сарын түрээсээ амжилттай (алданги үүсгэлгүйгээр) төлж байсан төлөлт бүрд `+0.2` оноо (энэ оноо нийтдээ `4.0`-с хэтрэх ёсгүй) тус тус өгнө.

### E: Бонус мөнгөн дүн тооцох `calcBonusAmount()` функц
Өмнөх `D` алхамд бодсон бонус оноонуудыг нэмж `BONUS_PER_POINT`-р үржиж харгалзах мөнгөн дүнг олно.


## Нэмэлт мэдээлэл

### Регистрийн дугаар шалгах
Хэрэглэгч эрх тогтоолгох үед регистрийн дугаараа бөглөж байгаа ба энэ нь ДАН-с ирэх мэдээлэлтэй нь таарч буй эсэхийг шалгаж, таарахгүй бол анхааруулах мэдэгдэл харуулна.

### Хамтран нэмэх
Эрх тогтоолгосны дараа хамтран нэмэх сонголт байгаа. Энэ үед үндсэн хэрэглэгч болон хамтран хоёулаа эрхээ тогтоолгосон байх шаардлагатай. Уг хамтрангийн тогтоолгосон эрхийг үндсэн дээр нэмэхдээ бонус оноог нь (хамтрангийн `E`-г) хасаж тооцож харуулах ёстой. Өөрөөр хэлбэл хоёр хүн хамтарч буй үед манай бонус дүнг зөвхөн үндсэн дээр нь тооцож явна, хамтран дээр нь тооцохгүй гэсэн үг.
